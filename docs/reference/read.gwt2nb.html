<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read and write spatial neighbour files — read.gwt2nb • spdep</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read and write spatial neighbour files — read.gwt2nb" />
<meta property="og:description" content="The &quot;gwt&quot; functions read and write GeoDa GWT files (the example file baltk4.GWT was downloaded from the site given in the reference), and the &quot;dat&quot; functions read and write Matlab sparse matrix files as used by James LeSage's Spatial Econometrics Toolbox (the example file wmat.dat was downloaded from the site given in the reference). The body of the files after any headers should have three columns separated by white space, and the third column must be numeric in the locale of the reading platform (correct decimal separator)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spdep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1-7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CO69.html">“The Problem of Spatial Autocorrelation:” forty years on</a>
    </li>
    <li>
      <a href="../articles/nb.html">Creating Neighbours</a>
    </li>
    <li>
      <a href="../articles/nb_igraph.html">Spatial weights objects as sparse matrices and graphs</a>
    </li>
    <li>
      <a href="../articles/nb_sf.html">Creating Neighbours using sf objects</a>
    </li>
    <li>
      <a href="../articles/sids.html">Introduction to the North Carolina SIDS data set (re-revised)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/spdep/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read and write spatial neighbour files</h1>
    
    <div class="hidden name"><code>read.gwt2nb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The "gwt" functions read and write GeoDa GWT files (the example file baltk4.GWT was downloaded from the site given in the reference), and the "dat" functions read and write Matlab sparse matrix files as used by James LeSage's Spatial Econometrics Toolbox (the example file wmat.dat was downloaded from the site given in the reference). The body of the files after any headers should have three columns separated by white space, and the third column must be numeric in the locale of the reading platform (correct decimal separator).</p>
    </div>

    <pre class="usage"><span class='fu'>read.gwt2nb</span><span class='op'>(</span><span class='va'>file</span>, region.id<span class='op'>=</span><span class='cn'>NULL</span><span class='op'>)</span>
<span class='fu'>write.sn2gwt</span><span class='op'>(</span><span class='va'>sn</span>, <span class='va'>file</span>, shpfile<span class='op'>=</span><span class='cn'>NULL</span>, ind<span class='op'>=</span><span class='cn'>NULL</span>, useInd<span class='op'>=</span><span class='cn'>FALSE</span>, legacy<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>read.dat2listw</span><span class='op'>(</span><span class='va'>file</span><span class='op'>)</span>
<span class='fu'>write.sn2dat</span><span class='op'>(</span><span class='va'>sn</span>, <span class='va'>file</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file</th>
      <td><p>name of file with weights data</p></td>
    </tr>
    <tr>
      <th>region.id</th>
      <td><p>region IDs</p></td>
    </tr>
    <tr>
      <th>sn</th>
      <td><p>a <code>spatial.neighbour</code> object</p></td>
    </tr>
    <tr>
      <th>shpfile</th>
      <td><p>character string: if not given Shapefile name taken from GWT file for this dataset</p></td>
    </tr>
    <tr>
      <th>ind</th>
      <td><p>character string: region id indicator field name</p></td>
    </tr>
    <tr>
      <th>useInd</th>
      <td><p>default FALSE, if TRUE, write <code>region.id</code> attribute ID key tags to output file (use in OpenGeoDa will depend on the shapefile having the field named in the <code>ind</code> argument matching the exported tags)</p></td>
    </tr>
    <tr>
      <th>legacy</th>
      <td><p>default FALSE; if TRUE, header has single field with number of observations only</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Attempts to honour the region.id argument given when reading GWT files. If the region IDs given in <code>region.id=</code> do not match the origins or destinations in the GWT file, an error will be thrown reporting <code>Error: !anyNA(reg*dij) is not TRUE</code> where '*' may be &#8216;o&#8217; for origins or &#8216;d&#8217; for destinations.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>read.gwt2nb</code> returns a neighbour "nb" object with the generalised weights stored as a list element called "dlist" of the "GeoDa" attribute.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Luc Anselin (2003) <em>GeoDa 0.9 User's Guide</em>, pp. 80--81, Spatial Analysis Laboratory, Department of Agricultural and Consumer Economics, University of Illinois, Urbana-Champaign, <a href='http://geodacenter.github.io/docs/geoda093.pdf'>http://geodacenter.github.io/docs/geoda093.pdf</a>; also <a href='http://spatial-econometrics.com/data/contents.html'>http://spatial-econometrics.com/data/contents.html</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Roger Bivand <a href='mailto:Roger.Bivand@nhh.no'>Roger.Bivand@nhh.no</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='read.gal.html'>read.gal</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>baltimore</span>, package<span class='op'>=</span><span class='st'>"spData"</span><span class='op'>)</span>
<span class='va'>STATION</span> <span class='op'>&lt;-</span> <span class='va'>baltimore</span><span class='op'>$</span><span class='va'>STATION</span>
<span class='va'>gwt1</span> <span class='op'>&lt;-</span> <span class='fu'>read.gwt2nb</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"weights/baltk4.GWT"</span>, package<span class='op'>=</span><span class='st'>"spData"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>,
 <span class='va'>STATION</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: 102, 115, 208 are not destinations</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Neighbours list symmetry;"</span>, <span class='fu'><a href='is.symmetric.nb.html'>is.symmetric.nb</a></span><span class='op'>(</span><span class='va'>gwt1</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span>,
 <span class='st'>"\n"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbours list symmetry; FALSE </div><div class='input'><span class='va'>listw1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='nb2listw.html'>nb2listw</a></span><span class='op'>(</span><span class='va'>gwt1</span>, style<span class='op'>=</span><span class='st'>"B"</span>, glist<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>gwt1</span>, <span class='st'>"GeoDa"</span><span class='op'>)</span><span class='op'>$</span><span class='va'>dist</span><span class='op'>)</span>
<span class='va'>tmpGWT</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>write.sn2gwt</span><span class='op'>(</span><span class='fu'><a href='listw2sn.html'>listw2sn</a></span><span class='op'>(</span><span class='va'>listw1</span><span class='op'>)</span>, <span class='va'>tmpGWT</span><span class='op'>)</span>
<span class='va'>gwt2</span> <span class='op'>&lt;-</span> <span class='fu'>read.gwt2nb</span><span class='op'>(</span><span class='va'>tmpGWT</span>, <span class='va'>STATION</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: 102, 115, 208 are not destinations</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Neighbours list symmetry;"</span>, <span class='fu'><a href='is.symmetric.nb.html'>is.symmetric.nb</a></span><span class='op'>(</span><span class='va'>gwt2</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span>,
 <span class='st'>"\n"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbours list symmetry; FALSE </div><div class='input'><span class='fu'><a href='diffnb.html'>diffnb</a></span><span class='op'>(</span><span class='va'>gwt1</span>, <span class='va'>gwt2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 211 
#&gt; Number of nonzero links: 0 
#&gt; Percentage nonzero weights: 0 
#&gt; Average number of links: 0 
#&gt; 211 regions with no links:
#&gt; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>oldcol</span><span class='op'>)</span>
<span class='va'>tmpMAT</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>COL.W</span> <span class='op'>&lt;-</span> <span class='fu'><a href='nb2listw.html'>nb2listw</a></span><span class='op'>(</span><span class='va'>COL.nb</span><span class='op'>)</span>
<span class='fu'>write.sn2dat</span><span class='op'>(</span><span class='fu'><a href='listw2sn.html'>listw2sn</a></span><span class='op'>(</span><span class='va'>COL.W</span><span class='op'>)</span>, <span class='va'>tmpMAT</span><span class='op'>)</span>
<span class='va'>listwmat1</span> <span class='op'>&lt;-</span> <span class='fu'>read.dat2listw</span><span class='op'>(</span><span class='va'>tmpMAT</span><span class='op'>)</span>
<span class='fu'><a href='diffnb.html'>diffnb</a></span><span class='op'>(</span><span class='va'>listwmat1</span><span class='op'>$</span><span class='va'>neighbours</span>, <span class='va'>COL.nb</span>, verbose<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: region.id differ; using ids of first list</span></div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 0 
#&gt; Percentage nonzero weights: 0 
#&gt; Average number of links: 0 
#&gt; 49 regions with no links:
#&gt; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49</div><div class='input'><span class='va'>listwmat2</span> <span class='op'>&lt;-</span> <span class='fu'>read.dat2listw</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"etc/weights/wmat.dat"</span>, 
 package<span class='op'>=</span><span class='st'>"spdep"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='diffnb.html'>diffnb</a></span><span class='op'>(</span><span class='va'>listwmat1</span><span class='op'>$</span><span class='va'>neighbours</span>, <span class='va'>listwmat2</span><span class='op'>$</span><span class='va'>neighbours</span>, verbose<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 0 
#&gt; Percentage nonzero weights: 0 
#&gt; Average number of links: 0 
#&gt; 49 regions with no links:
#&gt; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


