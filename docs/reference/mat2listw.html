<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert a square spatial weights matrix to a weights list object — mat2listw • spdep</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert a square spatial weights matrix to a weights list object — mat2listw" />
<meta property="og:description" content="The function converts a square spatial weights matrix, 
optionally a sparse matrix to a weights list 
object, optionally adding region IDs from the row names of the matrix, as a 
sequence of numbers 1:nrow(x), or as given as an argument. The style can be imposed by rebuilting the weights list object internally." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spdep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1-7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CO69.html">“The Problem of Spatial Autocorrelation:” forty years on</a>
    </li>
    <li>
      <a href="../articles/nb.html">Creating Neighbours</a>
    </li>
    <li>
      <a href="../articles/nb_igraph.html">Spatial weights objects as sparse matrices and graphs</a>
    </li>
    <li>
      <a href="../articles/nb_sf.html">Creating Neighbours using sf objects</a>
    </li>
    <li>
      <a href="../articles/sids.html">Introduction to the North Carolina SIDS data set (re-revised)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/spdep/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a square spatial weights matrix to a weights list object</h1>
    
    <div class="hidden name"><code>mat2listw.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function converts a square spatial weights matrix, 
optionally a sparse matrix to a weights list 
object, optionally adding region IDs from the row names of the matrix, as a 
sequence of numbers 1:nrow(x), or as given as an argument. The style can be imposed by rebuilting the weights list object internally.</p>
    </div>

    <pre class="usage"><span class='fu'>mat2listw</span><span class='op'>(</span><span class='va'>x</span>, row.names <span class='op'>=</span> <span class='cn'>NULL</span>, style<span class='op'>=</span><span class='st'>"M"</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A square non-negative matrix with no NAs representing spatial 
weights; may be a matrix of class &#8220;sparseMatrix&#8221;</p></td>
    </tr>
    <tr>
      <th>row.names</th>
      <td><p>row names to use for region IDs</p></td>
    </tr>
    <tr>
      <th>style</th>
      <td><p>default "M", unknown style; if not "M", passed to <code><a href='nb2listw.html'>nb2listw</a></code> to re-build the object</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>listw</code> object with the following members:</p>
<dt>style</dt><dd><p>"M", meaning matrix style, underlying style unknown, or assigned style argument in rebuilt object</p></dd>
  <dt>neighbours</dt><dd><p>the derived neighbours list</p></dd>
  <dt>weights</dt><dd><p>the weights for the neighbours derived from the matrix</p></dd>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Roger Bivand <a href='mailto:Roger.Bivand@nhh.no'>Roger.Bivand@nhh.no</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='nb2listw.html'>nb2listw</a></code>, <code><a href='nb2mat.html'>nb2mat</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>columbus</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shapes/columbus.shp"</span>, package<span class='op'>=</span><span class='st'>"spData"</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, quiet<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>col005</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dnearneigh.html'>dnearneigh</a></span><span class='op'>(</span><span class='fu'>st_coordinates</span><span class='op'>(</span><span class='fu'>st_centroid</span><span class='op'>(</span><span class='fu'>st_geometry</span><span class='op'>(</span><span class='va'>columbus</span><span class='op'>)</span>,
 of_largest_polygon<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>0</span>, <span class='fl'>0.5</span>, <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>columbus</span><span class='op'>$</span><span class='va'>NEIGNO</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>col005</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 170 
#&gt; Percentage nonzero weights: 7.080383 
#&gt; Average number of links: 3.469388 
#&gt; 4 regions with no links:
#&gt; 1005 1006 1008 1043
#&gt; Link number distribution:
#&gt; 
#&gt;  0  1  2  3  4  5  6  7  8  9 
#&gt;  4 11  5  8  3  9  2  2  3  2 
#&gt; 11 least connected regions:
#&gt; 1001 1007 1018 1010 1045 1044 1046 1047 1049 1048 1015 with 1 link
#&gt; 2 most connected regions:
#&gt; 1038 1036 with 9 links</div><div class='input'><span class='va'>col005.w.mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='nb2mat.html'>nb2mat</a></span><span class='op'>(</span><span class='va'>col005</span>, zero.policy<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>col005.w.b</span> <span class='op'>&lt;-</span> <span class='fu'>mat2listw</span><span class='op'>(</span><span class='va'>col005.w.mat</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>col005.w.b</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 170 
#&gt; Percentage nonzero weights: 7.080383 
#&gt; Average number of links: 3.469388 
#&gt; 4 regions with no links:
#&gt; 1005 1006 1008 1043
#&gt; Link number distribution:
#&gt; 
#&gt;  0  1  2  3  4  5  6  7  8  9 
#&gt;  4 11  5  8  3  9  2  2  3  2 
#&gt; 11 least connected regions:
#&gt; 1001 1007 1018 1010 1045 1044 1046 1047 1049 1048 1015 with 1 link
#&gt; 2 most connected regions:
#&gt; 1038 1036 with 9 links</div><div class='input'><span class='fu'><a href='diffnb.html'>diffnb</a></span><span class='op'>(</span><span class='va'>col005</span>, <span class='va'>col005.w.b</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 0 
#&gt; Percentage nonzero weights: 0 
#&gt; Average number of links: 0 
#&gt; 49 regions with no links:
#&gt; 1005 1001 1006 1002 1007 1008 1004 1003 1018 1010 1038 1037 1039 1040 1009 1036 1011 1042 1041 1017 1043 1019 1012 1035 1032 1020 1021 1031 1033 1034 1045 1013 1022 1044 1023 1046 1030 1024 1047 1016 1014 1049 1029 1025 1028 1048 1015 1027 1026</div><div class='input'><span class='va'>col005.w.mat.3T</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/kronecker.html'>kronecker</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>, <span class='va'>col005.w.mat</span><span class='op'>)</span>
<span class='va'>col005.w.b.3T</span> <span class='op'>&lt;-</span> <span class='fu'>mat2listw</span><span class='op'>(</span><span class='va'>col005.w.mat.3T</span>, style<span class='op'>=</span><span class='st'>"W"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: zero sum general weights</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>col005.w.b.3T</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 147 
#&gt; Number of nonzero links: 510 
#&gt; Percentage nonzero weights: 2.360128 
#&gt; Average number of links: 3.469388 
#&gt; 12 regions with no links:
#&gt; 1 3 6 21 50 52 55 70 99 101 104 119
#&gt; Link number distribution:
#&gt; 
#&gt;  0  1  2  3  4  5  6  7  8  9 
#&gt; 12 33 15 24  9 27  6  6  9  6 
#&gt; 33 least connected regions:
#&gt; 2 5 9 10 31 34 36 39 42 46 47 51 54 58 59 80 83 85 88 91 95 96 100 103 107 108 129 132 134 137 140 144 145 with 1 link
#&gt; 6 most connected regions:
#&gt; 11 16 60 65 109 114 with 9 links</div><div class='input'><span class='va'>W</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='fu'><a href='nb2listw.html'>nb2listw</a></span><span class='op'>(</span><span class='va'>col005</span>, style<span class='op'>=</span><span class='st'>"W"</span>, zero.policy<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>, <span class='st'>"CsparseMatrix"</span><span class='op'>)</span>
<span class='va'>col005.spM</span> <span class='op'>&lt;-</span> <span class='fu'>mat2listw</span><span class='op'>(</span><span class='va'>W</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: 1005, 1006, 1008, 1043 are not origins</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>col005.spM</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 170 
#&gt; Percentage nonzero weights: 7.080383 
#&gt; Average number of links: 3.469388 
#&gt; 4 regions with no links:
#&gt; 1005 1006 1008 1043
#&gt; Link number distribution:
#&gt; 
#&gt;  0  1  2  3  4  5  6  7  8  9 
#&gt;  4 11  5  8  3  9  2  2  3  2 
#&gt; 11 least connected regions:
#&gt; 1001 1007 1018 1010 1045 1044 1046 1047 1049 1048 1015 with 1 link
#&gt; 2 most connected regions:
#&gt; 1038 1036 with 9 links</div><div class='input'><span class='fu'><a href='diffnb.html'>diffnb</a></span><span class='op'>(</span><span class='va'>col005</span>, <span class='va'>col005.spM</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 0 
#&gt; Percentage nonzero weights: 0 
#&gt; Average number of links: 0 
#&gt; 49 regions with no links:
#&gt; 1005 1001 1006 1002 1007 1008 1004 1003 1018 1010 1038 1037 1039 1040 1009 1036 1011 1042 1041 1017 1043 1019 1012 1035 1032 1020 1021 1031 1033 1034 1045 1013 1022 1044 1023 1046 1030 1024 1047 1016 1014 1049 1029 1025 1028 1048 1015 1027 1026</div><div class='input'><span class='va'>IW</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/kronecker.html'>kronecker</a></span><span class='op'>(</span><span class='fu'>Matrix</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/Matrix/man/Diagonal.html'>Diagonal</a></span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>, <span class='va'>W</span><span class='op'>)</span>
<span class='va'>col005.spM.3T</span> <span class='op'>&lt;-</span> <span class='fu'>mat2listw</span><span class='op'>(</span><span class='va'>IW</span>, style<span class='op'>=</span><span class='st'>"W"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: 1, 3, 6, 21, 50, 52, 55, 70, 99, 101, 104, 119 are not origins</span></div><div class='output co'>#&gt; <span class='warning'>Warning: zero sum general weights</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>col005.spM.3T</span><span class='op'>$</span><span class='va'>neighbours</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 147 
#&gt; Number of nonzero links: 510 
#&gt; Percentage nonzero weights: 2.360128 
#&gt; Average number of links: 3.469388 
#&gt; 12 regions with no links:
#&gt; 1 3 6 21 50 52 55 70 99 101 104 119
#&gt; Link number distribution:
#&gt; 
#&gt;  0  1  2  3  4  5  6  7  8  9 
#&gt; 12 33 15 24  9 27  6  6  9  6 
#&gt; 33 least connected regions:
#&gt; 2 5 9 10 31 34 36 39 42 46 47 51 54 58 59 80 83 85 88 91 95 96 100 103 107 108 129 132 134 137 140 144 145 with 1 link
#&gt; 6 most connected regions:
#&gt; 11 16 60 65 109 114 with 9 links</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


